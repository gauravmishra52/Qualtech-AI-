spring:
  application:
    name: qualtech-ai
  devtools:
    restart:
      enabled: false
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
    publish-request-handled-events: false
  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB



  
  # Database Configuration
  datasource:
    url: ${DB_URL:jdbc:postgresql://localhost:5432/qualtech_db}
    username: ${DB_USERNAME:postgres}
    password: ${DB_PASSWORD:5213}
    driver-class-name: org.postgresql.Driver
    hikari:
      connection-timeout: 30000
      maximum-pool-size: 10
      minimum-idle: 5
      idle-timeout: 30000
      max-lifetime: 2000000

  # JPA/Hibernate Configuration
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
        # dialect removed as it is auto-detected
        jdbc:
          lob:
            non_contextual_creation: true

  # Thymeleaf Configuration
  thymeleaf:
    check-template-location: false

  # Flyway Configuration
  flyway:
    enabled: false
    baseline-on-migrate: true
    locations: classpath:db/migration
    validate-on-migrate: false
    clean-on-validation-error: false

  mail:
    host: ${EMAIL_HOST:smtp.gmail.com}
    port: ${EMAIL_PORT:587}
    username: ${EMAIL_USERNAME:gaurav.mishra.cs.2022@mitmeerut.ac.in}
    password: ${EMAIL_PASSWORD:gaurav@2005}
    protocol: smtp
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
            required: true
          connectiontimeout: 5000
          timeout: 5000
          writetimeout: 5000
        transport:
          protocol: smtp
        debug: true


# AWS Configuration
aws:
  # General AWS Configuration
  accessKeyId: ${AWS_ACCESS_KEY_ID:}
  secretKey: ${AWS_SECRET_ACCESS_KEY:}
  region: ${AWS_REGION:us-east-1}
  
  # S3 Configuration for face storage
  s3:
    bucket: ${AWS_S3_BUCKET_NAME:qualtech-ai-faces}
    bucket-name: ${AWS_S3_BUCKET_NAME:qualtech-ai-faces}
    face-images-prefix: faces/
    max-file-size: 10485760  # 10MB
  
  # Rekognition Configuration (if used)
  rekognition:
    collection-id: "qualtech-faces"
    min-confidence: 90

# Face Recognition Configuration
face:
  recognition:
    # These properties are currently hardcoded in FaceRecognitionServiceImpl.java
    # model-path: classpath:face_models/deploy.prototxt
    # weights-path: classpath:face_models/res10_300x300_ssd_iter_140000.caffemodel
    # match-threshold: 0.6
    # max-faces: 10
    # min-face-size: 100  



server:
  port: 8080
  servlet:
    context-path: /
  tomcat:
    max-swallow-size: -1
    connection-timeout: 600000 
  compression:
    enabled: true
    mime-types: text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
    min-response-size: 1024


jwt:
  secret: ${JWT_SECRET:a-very-long-secret-key-that-is-at-least-32-characters-for-hmac-sha-256}
  expiration: ${JWT_EXPIRATION:3600000}         
  refresh-expiration: ${JWT_REFRESH_EXPIRATION:86400000} 

# Application Configuration
app:
  frontend-url: ${APP_FRONTEND_URL:http://localhost:8080}
  email:
    from: ${EMAIL_FROM:gaurav.mishra.cs.2022@mitmeerut.ac.in}
    verification:
      token-expiration: ${EMAIL_TOKEN_EXPIRATION:86400000}  

# Logging Configuration
logging:
  level:
    root: INFO
    org.springframework: INFO
    org.hibernate.SQL: false
    org.hibernate.type.descriptor.sql.BasicBinder: false
    org.springframework.security: INFO
    org.springframework.web: INFO
    org.springframework.mail: ${LOG_LEVEL_MAIL:DEBUG}
    com.sun.mail: ${LOG_LEVEL_MAIL:DEBUG}
    com.qualtech_ai: ${LOG_LEVEL_APP:DEBUG}
    software.amazon.awssdk: ${LOG_LEVEL_AWS:INFO}

# Azure Configuration
azure:
  storage:
    connection-string: ${AZURE_STORAGE_CONNECTION_STRING:}
    container-name: ${AZURE_CONTAINER_NAME:videos}
  speech:
    key: ${AZURE_SPEECH_KEY:}
    region: ${AZURE_SPEECH_REGION:}
  language:
    key:  ${AZURE_LANGUAGE_KEY:}
    endpoint: ${AZURE_LANGUAGE_ENDPOINT:}
  face:  # Added for face recognition if needed
    key: ${AZURE_FACE_KEY:}
    endpoint: ${AZURE_FACE_ENDPOINT:}

# Analysis Provider Selection
analysis:
  provider: both  





